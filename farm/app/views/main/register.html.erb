
<div style="text-align:center; width:850px">
<br/>
	<div style="width:500px;text-align:left;margin-top:30px;line-height:30px">
	<h2>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请在以下表单中填写您的登录用户名及密码。注册成功后请注意牢记，这是您以后登录本网站的唯一依据。
	</h2>
	</div>
<br/>
<br/>
<%  round_table1 "450", "注册新用户" do %>
          <% form_tag({:controller=>"users", :action => 'create'}, {:name=>"userFrm"}) do %>
            <br/>
            <table width=100% height=80px style="margin-left:3px">
			 <tr>
			   <td width="100px" align=left style="font-size:12px; color:#000000">登录用户名:</td>
			   <td align=left><%= text_field 'user', 'name', :size=>22, :onblur=>"check_unique()", :style=>"width:130px"%></td>
			   <td style="padding-left:2px;" width=240 valign='top' align='left'><div id=tip></div></td>
			 </tr>
			 <tr>
			   <td width="100px" align=left style="font-size:12px; color:#000000">昵称:</td>
			   <td align=left><%= text_field 'user', 'nickname', :size=>22, :onblur=>"check_nick_unique()", :style=>"width:130px"%></td>
			   <td style="padding-left:2px;" width=240 valign='top' align='left'><div id=nick></div></td>
			 </tr>
			 <tr>
			   <td align=left style="font-size:12px; color:#000000">密码:</td>
			   <td align=left  colspan=2><%= password_field_tag 'password1', '', :size=>22, :style=>"width:130px"  %></td>
			 </tr>
			 <tr>
			   <td align=left style="font-size:12px; color:#000000">再次输入密码:</td>
			   <td align=left  colspan=2><%= password_field_tag 'password2', '', :size=>22, :style=>"width:130px" %></td>
			 </tr>
			</table>
			
            <%= submit_tag "提交", :class=>"submit", :onclick=>"if (!check_password(this)) return false;"%>
            &nbsp;&nbsp;&nbsp;<a href="/main/login">有账号了</a>
            <br/><br/>
          <% end %>
        <% end %>
</div>


<script>
  function check_password(form)
  {
      if ($("password1").value != $("password2").value)
          {
            alert("两次输入密码不一致");
            return false;
          }
      if ($("password1").value.length == 0)    
          {
            alert("密码不能为空");
            return false;
          }
      return true;
  }
  
    function check_unique()
	{
	    new Ajax.Updater('tip', '/users/check?email='+$("user_name").value, {asynchronous:true, evalScripts:true}); 
	}
	
	function check_nick_unique()
	{
	    new Ajax.Updater('nick', '/users/checknick?nickname='+$("user_nickname").value, {asynchronous:true, evalScripts:true}); 
	}
    
</script>